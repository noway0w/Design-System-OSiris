# Apache config for OSiris - place in /etc/httpd/conf.d/osiris.conf
# Requires: sudo dnf install httpd php php-fpm php-pdo php-sqlite3 -y
#
# 1. Copy: sudo cp osiris-httpd.conf /etc/httpd/conf.d/osiris.conf
# 2. Fix socket path: grep 'listen =' /etc/php-fpm.d/www.conf  # use that path below
# 3. Start: sudo systemctl enable --now php-fpm httpd
# 4. Test: curl -s http://127.0.0.1/api/debug-users.php

<VirtualHost *:80>
    ServerName 82.165.170.76
    DocumentRoot /home/OSiris/public_html

    <Directory /home/OSiris/public_html>
        AllowOverride All
        Require all granted
        DirectoryIndex index.html index.php
        Options -Indexes +FollowSymLinks
    </Directory>

    # PHP via php-fpm (RHEL 9 - no mod_php)
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/run/php-fpm/www.sock|fcgi://localhost"
    </FilesMatch>

    ErrorLog /var/log/httpd/osiris_error.log
    CustomLog /var/log/httpd/osiris_access.log combined
</VirtualHost>
